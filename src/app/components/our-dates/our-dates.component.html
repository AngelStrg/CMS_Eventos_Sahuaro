<form [formGroup]="form" (ngSubmit)="guardarEvento()" class="formulario">
  <h2>Registrar evento</h2>

  <label>Nombre:</label>
  <input type="text" formControlName="nombre" />

  <label>Apellidos:</label>
  <input type="text" formControlName="apellidos" />

  <label>Correo:</label>
  <input type="email" formControlName="correo" />

  <label>Teléfono:</label>
  <input type="text" formControlName="telefono" />

  <label>Fecha:</label>
  <input type="date" formControlName="fecha" />

  <label>Número de personas:</label>
  <select formControlName="personas">
    <option value="" disabled selected>Seleccione</option>
    <option *ngFor="let rango of rangosPersonas" [value]="rango">{{ rango }}</option>
  </select>

  <label>Tipo de evento:</label>
  <select formControlName="tipoEvento">
    <option value="" disabled selected>Seleccione</option>
    <option *ngFor="let tipo of tiposEvento" [value]="tipo">{{ tipo }}</option>
  </select>

  <label>¿Con alberca?</label>
  <select formControlName="alberca">
    <option value="" disabled selected>Seleccione</option>
    <option *ngFor="let opcion of opcionesAlberca" [value]="opcion">{{ opcion }}</option>
  </select>

  <label>Hora de inicio:</label>
  <select formControlName="horaInicio">
    <option value="" disabled selected>Seleccione</option>
    <option *ngFor="let hora of horasInicioOptions" [value]="hora">
      {{ formatHora(hora) }}
    </option>
  </select>

  <!-- Mostrar solo si hay horas extra disponibles (más de 0 opciones) -->
  <div *ngIf="horasExtrasOptions.length > 1">
    <label>Horas extra:</label>
    <select formControlName="horasExtras">
      <option *ngFor="let extra of horasExtrasOptions" [value]="extra">
        {{ extra }} {{ extra === 1 ? 'hora' : 'horas' }}
      </option>
    </select>
  </div>

  <div *ngIf="horaFinCalculada">
    <label>Hora de fin:</label>
    <input type="text" [value]="horaFinCalculada" disabled />
  </div>

  <label>Color de mantel:</label>
  <select formControlName="colorMantel">
    <option value="" disabled selected>Seleccione</option>
    <option *ngFor="let color of coloresMantel" [value]="color" [style.background]="color">
      {{ color }}
    </option>
  </select>

  <label>Extras:</label>
  <div *ngFor="let extra of opcionesExtras">
    <input
      type="checkbox"
      [value]="extra"
      (change)="onExtraChange($event)"
      [checked]="form.value.extras?.includes(extra)"
    />
    {{ extra }}
  </div>

  <button type="submit" [disabled]="form.invalid">Guardar</button>
</form>

<hr />

<h2>Eventos Registrados</h2>
<div *ngFor="let evento of eventos" class="evento">
  <p><strong>Nombre:</strong> {{ evento.nombre }} {{ evento.apellidos }}</p>
  <p><strong>Fecha:</strong> {{ evento.fecha }}</p>
  <p><strong>Tipo:</strong> {{ evento.tipoEvento }}</p>
  <p><strong>Inicio:</strong> {{ formatHora(+evento.horaInicio) }}</p>
  <p><strong>Fin:</strong> {{ evento.horaFin }}</p>
  <button (click)="eliminarEvento(evento.id!)">Eliminar</button>
</div>
